### 11.3 正则表达式与模式匹配

**1. 定义正则表达式**

```javascript
let pattern = /s$/; 
```

```javascript
let pattern = new RegExp("s$");
```

```javascript
let pattern = /s$/i;
```



**字面量字符**

| 字符         | 匹配目标                                                     |
| ------------ | :----------------------------------------------------------- |
| 字母数字字符 | 自身                                                         |
| \0           | NUL 字符（\u0000）                                           |
| \t           | 制表符（\u0009）                                             |
| \n           | 换行符（\000A）                                              |
| \v           | 垂直制表符（\u000B）                                         |
| \f           | 进纸符（\u000C）                                             |
| \r           | 回车符（\u000D）                                             |
| \xnn         | 十六进制数值 nn 指定的拉丁字符。例如，\x0A 等同于 \n         |
| \uxxxx       | 十六进制数值 xxxx 指定的 Unicode 字符。例如，\u0009 等同于 \t |
| \u{n}        | 码点 n 指定的 Unicode 字符，其中 n 是介于 0 到 10FFFF 之间的 1 到 6 个十六进制数字。注意，这种语法仅在使用 u 标志的正则表达式中支持 |
| \cX          | 控制字符 ^X。例如，\cJ 等价于换行符 \n                       |

有一些英文标点符号在正则表达式中具有特殊含义，它们是：

^ $ . * + ? = ! : | \ / (  )  [   ]  {    }         



**字符类**

| 字符   | 匹配目标                                                     |
| ------ | ------------------------------------------------------------ |
| [...]  | 方括号中的任意一个字符                                       |
| [^...] | 不在方括号中的任意一个字符                                   |
| .      | 除换行符或其他 Unicode 行终止符之外的任意字符。如果 RegExp 使用 s 标志，则句点匹配任意字符，包括行终止符 |
| \w     | 任意 ASCII 单词字符。等价于 [a-zA-Z0-9_]                     |
| \W     | 任意非 ASCII 单词字符。等价于 `[^a-zA-Z0-9_]`                |
| \s     | 任意 Unicode 空白字符                                        |
| \S     | 任意非 Unicode 空白字符                                      |
| \d     | 任意 ASCII 数字字符。等价于 [0-9]                            |
| \D     | 任意非 ASCII 数字字符。等价于 `[^0-9]`                       |
| [\b]   | 退格字符字面值                                               |



**重复**

| 字符  | 含义                                                    |
| ----- | ------------------------------------------------------- |
| {n,m} | 匹配前项至少 n 次，但不超过 m 次                        |
| {n,}  | 匹配前项 n 或更多次                                     |
| {n}   | 匹配前项恰好 n 次                                       |
| ?     | 匹配前项零或一次。换句话说，前项是可选的。等价于 {0, 1} |
| +     | 匹配前项一或多次。等价于 {1,}                           |
| *     | 匹配前项零或多次。等价于 {0,}                           |

下面的代码展示了几个例子：

```javascript
let r = /\d{2,4}/; // 匹配 2 到 4 位数字

r = /\w{3}\d?/; // 匹配                                                                                                                                                                                                                                                                                                                                              3 个字母后跟 1 个可选的数字	
r = /\s+java\s+/; // 匹配 “java" 且前后有一个或多个空格
r = /[^(]*/; // 匹配零或多个非开始圆括号字符                
```

 



**指定匹配位置**

| 字符  | 含义                                                         |
| ----- | ------------------------------------------------------------ |
| ^     | 匹配字符串开头，或者在使用 m 标志时，匹配一行的开头          |
| $     | 匹配字符串末尾，或者在使用 m 标志时，匹配一行的末尾          |
| \b    | 匹配单词边。换句话说，匹配 \w 字符和 \W 字符之间或 \w 与字符串开头或末尾之间的位置（但要注意，[\b] 匹配退格字符） |
| \B    | 匹配非单词边界的位置                                         |
| (?=p) | 肯定式向前查找断言。要求后面的字符匹配模式 p，但匹配结果不包含为之匹配的字符 |
| (?!p) | 否定式向前查找断言。要求后面的字符不匹配模式 p               |

