# 4.7 操作符概述



| 操作符                                                    | 操作                         | 结合性 | 操作数 | 类型                 |
| --------------------------------------------------------- | ---------------------------- | ------ | ------ | -------------------- |
| ++                                                        | 先或后递增                   | 右     | 1      | 1val → num           |
| --                                                        | 先或后递减                   | 右     | 1      | 1val → num           |
| -                                                         | 负值                         | 右     | 1      | num → num            |
| +                                                         | 转换为数值                   | 右     | 1      | any → num            |
| ~                                                         | 反转二进制位                 | 右     | 1      | int → int            |
| !                                                         | 反转布尔值                   | 右     | 1      | bool → bool          |
| delete                                                    | 删除属性                     | 右     | 1      | 1val → bool          |
| typeof                                                    | 确定操作数类型               | 右     | 1      | any → str            |
| void                                                      | 返回 undefined               | 右     | 1      | any → undefined      |
| **                                                        | 幂                           | 右     | 2      | num，num → num       |
| *、/、%                                                   | 乘、除、取余                 | 左     | 2      | num，num → num       |
| +、-                                                      | 加、减                       | 左     | 2      | num，num → num       |
| +                                                         | 拼接字符串                   | 左     | 2      | str，str → str       |
| <<                                                        | 左移位                       | 左     | 2      | int，int → int       |
| >>                                                        | 右移位以符号填充             | 左     | 2      | int，int → int       |
| >>>                                                       | 右移位以零填充               | 左     | 2      | int，int → int       |
| <、<=、>、>=                                              | 按数值顺序比较               | 左     | 2      | num，num → bool      |
| <、<=、>、>=                                              | 按字母表顺序比较             | 左     | 2      | str，str → bool      |
| instanceof                                                | 测试对象类                   | 左     | 2      | obj，func → bool     |
| in                                                        | 测试属性是否存在             | 左     | 2      | any，obj → bool      |
| ==                                                        | 非严格相等测试               | 左     | 2      | any，any → bool      |
| !=                                                        | 非严格不相等测试             | 左     | 2      | any，any → bool      |
| ===                                                       | 严格相等测试                 | 左     | 2      | any，any → bool      |
| !==                                                       | 严格不相等测试               | 左     | 2      | any，any → bool      |
| &                                                         | 计算按位与                   | 左     | 2      | int，int → int       |
| ^                                                         | 计算按位异或                 | 左     | 2      | int，int → int       |
| \|                                                        | 计算按位或                   | 左     | 2      | int，int → int       |
| &&                                                        | 计算逻辑与                   | 左     | 2      | any，any → any       |
| \|\|                                                      | 计算逻辑或                   | 左     | 2      | any，any → any       |
| ??                                                        | 选择第一个有定义的操作数     | 左     | 2      | any，any → any       |
| ?:                                                        | 选择第二或第三个操作数       | 右     | 3      | bool，any，any → any |
| =                                                         | 为变量或属性赋值             | 右     | 2      | 1val，any → any      |
| **`**=、*=、/=、%=、+=、-=、&=、^=、|=、<<=、>>=、>>>=`** | 操作并赋值                   | 右     | 2      | 1val，any → any      |
| ,                                                         | 丢弃第一个操作数，返回第二个 | 左     | 2      | any，any → any       |



## 1. 操作数个数

**`操作符可以按照它们期待的操作数个数（参数数量）来分类。多数 JavaScript 操作符（如乘法操作符 * ）都是二元操作符，可以将两个表达式组合成一个更复杂的表达式。换句话说，这些操作符期待两个操作数。JavaScript 也支持一些一元操作符，这些操作符将一个表达式转换为另一个更复杂的表达式。表达式 -x 中的操作符 - 就是一元操作符，用于对操作数 x 进行求负值操作。最后，JavaScript 也支持一个三元操作符，即条件操作符 ?:，用于将三个表达式组合为一个表达式。`**                                     





# 4.8 算术表达式

 

## 1. + 操作符

**`二元 + 操作符用于计算数值操作操作数的和或者拼接字符串操作数：`** 

```javascript
1 + 2; // 3
"hello" + " " + "there"; // "hello there"
"1" + "2"; // "12"
```



**`严格来讲，+ 操作符的行为如下所示。`** 

* **`如果有一个操作是对象，则 + 操作符使用 3.9.3 节介绍的对象到原始值的算法把该操作数转换为原始值。Date 对象用 toString() 方法来转换，其他所有对象通过 valueOf() 转换（如果这个方法返回原始值）。不过，多数对象并没有 valueOf() 方法，因此它们也会通过 toString() 方法转换。`** 
* **`完成对象到原始值的转换后，如果有操作数是字符串，另一个操作数也会被转换为字符串并进行拼接。`** 
* **`否则，两个操作数都被转换为数值（或 NaN），计算加法。`**                                               

下面是几个例子：

```javascript
1 + 2; // 3
"1" + "2"; // "12"
"1" + 2; // "12"                                                      
1 + {}; // "1[object Object]"
true + true; // 2
2 + null; // 2
2 + undefined; // NaN
```



**`最后，很重要的一点是要注意 + 操作符在用于字符串和数值时，可能不遵守结合性。换句话说，结果取决于操作执行的顺序。`** 

**`例如：`** 

```javascript
1 + 2 + "blind mice"; // "3 blind mice"
1 + (2 + "blind mice"); // "12 blind mice"
```

**`第一行没有圆括号，+ 操作符表现出左结合性，即两个数值先相加，然后它们的和再与字符串拼接。第二行中的圆括号改变了操作执行的顺序：数值 2 先于字符串拼接产生一个新字符串，然后数值 1 再与新字符串拼接得到最终结果。`** 





## 3. 位操作符

 

| 操作符                  | 功能                                                         |
| ----------------------- | ------------------------------------------------------------ |
| **`按位与（&）`**       | **`& 操作符对其整数参数的每一位执行布尔与操作。只有两个操作数对应的位都为 1，结果中对应的位才为 1。例如，0x1234 & 0x00FF 求值为 0x0034。`** |
| **`按位或（|）`**       | **`| 操作符对其整数参数的每一位执行布尔或操作。两个操作数中对应的位都为 1 或 有一个为 1，结果中对应的位就为 1。例如，0x1234 | 0x00FF 求值为 0x12FF。`** |
| **`按位异或（^)`**      | **`^ 操作符对其整数参数的每一位执行布尔异或操作。异或的意思就是要么操作数一为 true，要么操作数二 为 true，二者不能同时为 true。两个操作数中对应的位只有一个为 1，结果中对应的位就为 1。例如，0xFF00 ^ 0xF0F0 求值为 0x0FF0。`** |
| **`按位非（~）`**       | **`~ 操作符是 一元操作符，要出现在其操作数前面。按位非的结果是反转操作数中的所有位。因为 JavaScript 表示有符号整数的方式，对一个值应用 ~ 操作符等于修改其符号并减 1。例如，~0x0F，求值为 0xFFFFFFF0，即 -16。`** |
| **`左移（<<）`**        | **`<< 操作符将第一个操作数的所有位向左移动第二个操作数指定的位数，第二个操作数应该是介于 0 到 31 之间的整数。例如，在 a << 1 操作中，a 的第 1 位变成第 2 位，a 的第 2 位变成第 3 位，以此类推。新的第 1 位会填充 0，第 32 位的值丢弃。将一个值左移 1 位等于这个值乘以 2，左移 2 位等于乘以 4，以此类推。例如，7 << 2 求值为 28。`** |
| **`有符号右移（>>）`**  | **`>> 操作符将第一个操作数的所有位向右移动第二个操作数指定的位数（介于 0 到 31 之间）。移出右边的位会被丢弃。填充到左边的位取决于原始操作数的符号，以便结果保持相同的符号。如果第一个操作数是正值，则结果的高位填充 0。如果第一个操作数是负值，则结果的高位填充 1。将一个正值右移 1 位等于这个值除以 2（丢弃余数），右移 2 位等于除以 4，以此类推。例如，7 >> 1 求值为 3，-7 >> 1 求值为 -4。`** |
| **`零填充右移（>>>）`** | **`>>> 操作符与 >> 操作符类似，只不过无论第一个操作数的符号是什么，左侧移动的位始终填充 0。如果想把有符号 32 位值看成无符号整数，那可以使用这个操作符。例如，-1 >> 4 求值为 -1，而 -1 >>> 4 求值为 0x0FFFFFFF。这是 JavaScript 中唯一一个不能用于 BigInt 的位操作符。BigInt 不像 32 位整数那样通过设置高位的方式表示负值，这个操作符只对特定的补码表示有意义。`** |







# 4.9 关系表达式



## 1. 相等和不相等操作符



### 严格相等

**`严格相等操作符 === 求值其操作数，然后按下列步骤比较两个值，不做类型转换。`** 

* **`如果两个值类型不同，则不相等。`** 
* **`如果两个值都是 null 或都是 undefined，则相等。`** 
* **`如果两个值都是布尔值 true 或都是布尔值 false，则相等。`**
* **`如果一个或两个值是 NaN，则不相等`。**
* **`如果两个值都是数值且值相同，则相等。如果一个值是 0 而另一个是 -0，则也相等。`**
* **`如果两个值都是字符串且相同位置包含完全相同的 16 位值，则相等。`**
* **`如果两个值引用同一个对象、数组或函数，则相等。如果它们引用不同的对象，即使两个对象有完全相同的属性，也不相等。`** 



### 基于类型转换的相等

**`相等操作符 == 与严格相等类似，但没那么严格。如果两个操作数的值类型不同，它会尝试做类型转换，然后再比较。`** 

* **`如果两个值类型相同，则按照前面的规则测试它们是否严格相等。如果严格相等，则相等。如果不严格相等，则不相等。`** 
* **`如果两个值类型不同，== 操作符仍然可能认为它们相等。此时它会使用以下规则，基于类型转换来判定相等关系。`** 
  * **`如果一个值是 null，另一个值是 undefined，则相等。`** 
  * **`如果一个值是数值，另一个值是字符串，把字符串转换为数值，再比较转换后的数值。`** 
  * **`如果有一个值为 true，把它转换为 1，再比较。如果有一个值为 false，把它转换为 0，再比较。`** 
  * **`如果一个值是对象，另一个值是数值或字符串，先使用 3.9.3 节描述的算法把对象转换为原始值，再比较。对象转换为原始值时要么使用其 toString() 方法，要么使用其 valueOf() 方法。JavaScript 内置的核心类先尝试使用 valueOf()，再尝试 toString()。但 Date 类是个例外，这个类执行 toString() 转换。`** 
  * **`其他任何值的组合都不相等。`** 

​                                                                                                                                                                                                                                                                                      
