# 7.1 创建数组



## 4. Array.of()

```javascript
Array.of(); // => []
Array.of(10); // -> [10]
Array.of(1,2,3); // => [1,2,3]
```







# 7.8 数组方法

## 1. 数组迭代器方法

### forEach()

**`forEach() 方法迭代数组的每个元素，并对每个元素都调用一次我们指定的函数`** 。

```javascript
let data = [1,2,3,4,5], sum= 0;

// 计算数组元素之和
data.forEach(value => { sum += value; }); // sum: 15

// 递增每个元素的值
data.forEach(function(v, i, a) { a[i] = v + 1; }); // data: [2,3,4,5,6]
```



### map()

**`map() 方法把调用它的数组的每个元素分别传给我们指定的函数，返回这个函数的返回值构成的数组`** 。例如：

```javascript
let a = [1, 2, 3];

a.map(x => x * x); // => [1, 4, 9]
```



### filter()

**`filter() 方法返回一个数组，该数组包含调用它的数组的子数组。传给这个方法的函数，返回 true，则传给这个函数的元素就是 filter() 最终返回的子数组成员。`**

```javascript
let a = [5, 4, 3, 2, 1];
a.filter(x => x < 3); // => [2, 1], 小于 3 的值
a.filter((x, i) => i % 2 === 0); // => [5, 3, 1], 隔一个选一个
```



### find() 和 findIndex()

**`find() 返回匹配的元素，findIndex() 返回匹配元素的索引。如果没有找到匹配的元素，则 find() 返回 undefined，而 findIndex() 返回 -1`**。

```javascript
let a = [1,2,3,4,5];
a.findIndex(x => x === 3); // => 2，值 3 的索引是 2
a.findIndex(x => x < 0); // => -1，数组中没有负数
a.find(x => x % 5 === 0); // => 5，5的倍数
a.find(x => x % 7 === 0); // => undefined，数组中没有 7 的倍数
```





### every() 与 some()

**`every() 数组中所有元素都返回 true 时才返回 true`**

```javascript
let a = [1,2,3,4,5];

a.every(x => x < 10); // => true，所有值都小于10
a.every(x => x % 2 === 0); // => false，并非所有值都是偶数
```



**`some() 数组中有一个元素让断言函数返回 true，它就返回 true，但必须数组的所有元素对断言函数都返回 false 才返回 false`**。

```javascript
let a = [1,2,3,4,5];

a.some(x => x % 2 === 0); // => true，a 包含偶数
a.some(isNaN); // => false，a 没有非数值
```



### reduce() 与 reduceRight()

```                                                                                                                                                                                                                                       javascript
let a = [1,2,3,4,5];

a.reduce((x, y) => x + y, 0); // => 15，所有值之和
a.reduce((x, y) => x * y, 1); // => 120，所有值之积
a.reduce((x, y) => (x > y) ? x : y); // => 5，最大值
```



## 2. 使用 flat() 和 flatMap() 打平数组

**`flat() 方法用于创建并返回一个新数组`**

```                                                                                                                                                                                                                                                                                                                                                                                                                           javascript
[1, [2, 3]].flat(); // => [1, 2, 3]
[1, [2, [3]]].flat(); // => [1, 2, [3]]
```



```javascript
let a = [1, [2, [3, [4]]]];

a.flat(1); // => [1, 2, [3, [4]]]  
a.flat(2); // => [1, 2, 3, [4]]
a.flat(3); // => [1, 2, 3, 4]
a.flat(4); // => [1, 2, 3, 4]
```



**`flatMap() 方法与 map() 方法相似，只不过返回的数组会自动被打平，就像传给了 flat() 一样`**。

```javascript
let phrases = ["hello world", "the definitive guide"];

let words = phrases.flatMap(phrase => phrase.split(" "));

words // => ["hello", "world", "the", "definitive", "guide"];
```



## 3. 使用 concat() 添加数组

**`concat() 方法创建并返回一个新数组。`**

```javascript
let a = [1, 2, 3];

a.concat(4, 5); // => [1, 2, 3, 4, 5]
a.concat([4, 5], [6, 7]); // => [1, 2, 3, 4, 5, 6, 7] 数组被打平了
a.concat(4, [5, [6, 7]]); // => [1, 2, 3, 4, 5, [6, 7]] 但不会打平嵌套的数组
a // => [1, 2, 3] 原始数组没有改变
```



## 4. 通过 push() 、pop()、shift() 和 unshift() 实现栈和队列操作

**`pop() 它用于删除数组最后面的元素，减少数组长度，并返回删除的值`**。

```javascript
let stack = []; // stack 为 []
 
stack.push(1, 2); // stack 为 [1, 2]
stack.pop(); // stack 为 [1]，返回 2
stack.push(3); // stack 为 [1, 3]
stack.pop(); // stack 为 [1]，返回 3
stack.push([4, 5]); // stack 为 [1, [4, 5]]
stack.pop(); // stack 为 [1]，返回 [4, 5]
stack.pop(); // stack 为 []，返回 1
```



**`shift() 删除并返回数组的第一个元素`**

```javascript
let q = []; // q 为 []

q.push(1, 2); // q 为 [1, 2]
q.shift(); // q 为 [2]，返回 1
q.push(3); // q 为 [2, 3]
q.shift(); // q 为 [3]，返回 2
q.shift(); // q 为 []，返回 3
```



**`unshift() 用于在数组开头添加一个或多个元素`**

```javascript
let a = []; // a 为 []

a.unshift(1); // a 为 [1]
a.unshift(2); // a 为 [2, 1]

a = []; // a 为 []
a.unshift(1, 2); // a 为 [1, 2] 
```



## 5. 使用 slice()、splice()、fill() 和 copyWithin()

 ### slice()

```javascript
let a = [1, 2, 3, 4, 5];

a.slice(0, 3); // 返回 [1, 2, 3]
a.slice(3); // 返回 [4, 5]
a.slice(1, -1); // 返回 [2, 3, 4]
a.slice(-3, -2); // 返回 [3]
```



### splice()

```javascript
let a = [1, 2, 3, 4, 5, 6, 7, 8];

a.splice(4); // => [5, 6, 7, 8], a 现在是 [1, 2, 3, 4]
a.splice(1, 2); // => [2, 3], a 现在是 [1, 4]
a.splice(1, 1); // => [4]，a 现在是 [1]
```



```javascript
let a = [1, 2, 3, 4, 5];

a.splice(2, 0, "a", "b"); // => []，a 现在是 [1, 2, "a", "b", 3, 4, 5]
a.splice(2, 2, [1, 2], 3); // ["a", "b"]，a 现在是 [1, 2, [1, 2], 3, 3, 4, 5]
```



### fill()

**`fill() 方法将数组的元素或切片设置为指定的值。它会修改调用它的数组，也返回修改后的数组`**

```javascript
let a = new Array(5);

a.fill(0); // => [0, 0, 0, 0, 0]，用 0 填充数组
a.fill(9, 1); // => [0, 9, 9, 9, 9]，从索引 1 开始填充 9
a.fill(8, 2, -1); // => [0, 9, 8, 8, 9]，在索引 2、3 填充 8
```









