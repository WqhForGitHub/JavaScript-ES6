### 3.2 数值



#### 1. 整数字面量

下面是十六进制整数字面量的例子：

```javascript
0xff // => 255：（15*16 + 15）

0xBADCAFE // => 195939070
```



在 ES6 及之后的版本中，也可以通过二进制（基数为 2）或八进制（基数为 8）表示整数，分别使用前缀 0b 和 0o（或 0B 和 0O）：

```javascript
0b10101 // => 21：（1 * 16 + 0 * 8 + 1 * 4 + 0 * 2 + 1 * 1）

0o377 // => 255：（3 * 64 + 7 * 8 + 7 * 1）
```



#### 2. 浮点字面量

```javascript
3.14
2345.679
.3333333333333333333
6.02e23 
1.4738223-32
```



数值字面量中的分隔符

```javascript
lexxxxxxxxxxxxxxxx
```

 

#### 3. JavaScript 中的算术

JavaScript 预定义了全局常量 Infinity 和 NaN 以对正无穷和非数值。这些值也可以通过 Number 对象的属性获取：

```javascript
Infinity                 // 因为太大而无法表示的正数
Number.POSITIVE_INFINITY // 同上
1/0 // => Infinity
Number.MAX_VALUE * 2 // => Infinity
-Infinity // 因为太大而无法表示的负数
Number.NEGATIVE_INFINITY // 同上
-1/0 // => -Infinity
-Number.MAX_VALUE * 2 // => -Infinity

NaN // 非数值
Number.NaN // 同上，写法不同
0/0 // => NaN
Infinity/Infinity // => NaN

Number.MIN_VALUE/2 // => 0: 下溢出
-Number.MIN_VALUE/2 // => -0：负零
-1/Infinity // =>-0：也是负零
-0

// ES6 定义了下列 Number 属性
Number.parseInt() // 同全局 parseInt() 函数
Number.parseFloat() // 同全局 parseFloat() 函数
Number.isNaN(x) // 判断 x 是不是 NaN
Number.isFinite(x) // 判断 x 是数值还是无穷
Number.isInteger(x) // 判断 x 是不是整数
Number.isSafeInteger(x) 
Number.MIN_SAFE_INTEGER // => -(2**53 - 1)                                                                                       
Number.MAX_SAFE_INTEGER // => 2**53 - 1
Number.EPSILON 
```



#### 4. 二进制浮点数与舍入错误



#### 5. 通过 BigInt 表示任意精度整数

```javascript
1234n // 一个不太大的 BigInt 字面量
0b111111n // 二进制 BigInt
0o7777n // 八进制 BigInt
0x8000000000000000n // => 2n**63n：一个 64 位整数
```

可以把 BigInt() 函数把常规 JavaScript 数值或字符串转换成 BigInt 值：

```javascript
BigInt(Number.MAX_SAFE_INTEGER); // => 9007199254740991n
let string = "1" + "0".repeat(100); // 1 后跟 100 个零
BigInt(string); // 10n**100n：一个天文数字
```

BigInt 值的算术运算与常规 JavaScript 数值的算术运算类似，只不过除法会丢弃余数并且会向下（向零）舍入：

```javascript
1000n + 2000n // => 3000n
3000n - 2000n // => 1000n
2000n * 3000n // => 6000000n
3000n / 997n // => 3n：商是 3
3000n % 997n // => 9n：余数是 9
(2n ** 131071n) - 1n // 有 39457 位数字的梅森素数                                                                                  
```





### 3.3 文本

#### 3. 使用字符串

除了 length 属性之外，JavaScript 还提供了操作字符串的丰富 API：

```javascript
let s = "Hello, world"; // 先声明一个字符串

// 取得字符串的一部分
s.substring(1, 4); // => "ell"：第 2 ~ 4 个字符
s.slice(1, 4); // => "ell"：同上
s.slice(-3); // => "rld"：最后 3 个字符
s.split(', '); // => ["Hello", "world"]: 从定界符处拆开

// 搜索字符串
s.indexOf("l"); // => 2：第一个字母 l 的位置
s.indexOf("l", 3); // => 3：位置 3 后面第一个 "l" 的位置
s.indexOf("zz"); // => -1：s 并不包括子串 "zz"
s.lastIndexOf("l"); // => 10：最后一个字母 l 的位置

// ES6 及以后版本中的布尔值搜索函数
s.startWith("Hell") // => true：字符串是以这些字符开头的
s.endWith("!"); // => false：s 不是以它结尾的
s.includes("or"); // true：s 包含字串 "or"

// 创建字符串的修改版本
s.replace("llo", "ya"); // => "Heya, world"
s.toLowerCase() // => "hello, world"
s.toUpperCase() // => "HELLO, WORLD"
s.normalize();  // Unicode NFC 归一化：ES6 新增
s.normalize("NFD"); // NFD 归一化。还有 "NFKC" 和 "NFKD"

// 访问字符串中的个别（16 位值）字符                
s.charAt(0); // => "H": 第一个字符
s.charAt(s.length - 1); // => "d": 最后一个字符
s.charCodeAt(0); // => 72: 指定位置的 16 位数值
s.codePointAt(0); // => 72: ES6, 适用于码点大于 16 位的情形                                                                           

// ES2017 新增的字符串填充函数
"x".padStart(3); 	  // => "  x": 在左侧添加空格，让字符串长度变成 3
"x".padEnd(3);        // => "x  ": 在右侧添加空格，让字符串长度变成 3
"x".padStart(3, "*")  // => "**x": 在左侧添加星号，让字符串长度变成 3
"x".padEnd(3, "-")    // => "x--"：在右侧添加破折号，让字符串长度变成 3

// 删除空格函数。trim() 是 ES5 就有的，其他是 ES2019 增加的
"test  ".trim();        // => "test": 删除开头和末尾的空格
"  test  ".trimStart(); // => "test  ": 删除左侧空格。也叫 trimLeft
"  test  ".trimEnd();   // => "  test": 删除右侧空格。也叫 trimRight

// 未分类字符串方法
s.concat("!");  // => "Hello, world!": 可以用 + 操作符代替
"<>".repeat(5); // => "<><><><><>": 拼接 n 次。ES6 新增                                                                  
```



字符串也可以被当成只读数组，使用方括号而非 charAt() 方法访问字符串中个别的字符（16 位值）：

```                                                                                                                         javascript
let s = "hello, world";
s[0];            // => "h"
s[s.length - 1]; // => "d"
```

